                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.0 #15242 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module I2C
                                      6 	
                                      7 	.optsdcc -mmcs51 --model-small
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _I2C_Delay
                                     12 	.globl _Delay_us_
                                     13 	.globl _SCL
                                     14 	.globl _SDA
                                     15 	.globl _CCF0
                                     16 	.globl _CCF1
                                     17 	.globl _CCF2
                                     18 	.globl _CR
                                     19 	.globl _CF
                                     20 	.globl _RI
                                     21 	.globl _TI
                                     22 	.globl _RB8
                                     23 	.globl _TB8
                                     24 	.globl _REN
                                     25 	.globl _SM2
                                     26 	.globl _SM1
                                     27 	.globl _SM0
                                     28 	.globl _IT0
                                     29 	.globl _IE0
                                     30 	.globl _IT1
                                     31 	.globl _IE1
                                     32 	.globl _TR0
                                     33 	.globl _TF0
                                     34 	.globl _TR1
                                     35 	.globl _TF1
                                     36 	.globl _PX0
                                     37 	.globl _PT0
                                     38 	.globl _PX1
                                     39 	.globl _PT1
                                     40 	.globl _PS
                                     41 	.globl _PADC
                                     42 	.globl _PLVD
                                     43 	.globl _PPCA
                                     44 	.globl _EX0
                                     45 	.globl _ET0
                                     46 	.globl _EX1
                                     47 	.globl _ET1
                                     48 	.globl _ES
                                     49 	.globl _EADC
                                     50 	.globl _ELVD
                                     51 	.globl _EA
                                     52 	.globl _P77
                                     53 	.globl _P76
                                     54 	.globl _P75
                                     55 	.globl _P74
                                     56 	.globl _P73
                                     57 	.globl _P72
                                     58 	.globl _P71
                                     59 	.globl _P70
                                     60 	.globl _P67
                                     61 	.globl _P66
                                     62 	.globl _P65
                                     63 	.globl _P64
                                     64 	.globl _P63
                                     65 	.globl _P62
                                     66 	.globl _P61
                                     67 	.globl _P60
                                     68 	.globl _P57
                                     69 	.globl _P56
                                     70 	.globl _P55
                                     71 	.globl _P54
                                     72 	.globl _P53
                                     73 	.globl _P52
                                     74 	.globl _P51
                                     75 	.globl _P50
                                     76 	.globl _P47
                                     77 	.globl _P46
                                     78 	.globl _P45
                                     79 	.globl _P44
                                     80 	.globl _P43
                                     81 	.globl _P42
                                     82 	.globl _P41
                                     83 	.globl _P40
                                     84 	.globl _P37
                                     85 	.globl _P36
                                     86 	.globl _P35
                                     87 	.globl _P34
                                     88 	.globl _P33
                                     89 	.globl _P32
                                     90 	.globl _P31
                                     91 	.globl _P30
                                     92 	.globl _P27
                                     93 	.globl _P26
                                     94 	.globl _P25
                                     95 	.globl _P24
                                     96 	.globl _P23
                                     97 	.globl _P22
                                     98 	.globl _P21
                                     99 	.globl _P20
                                    100 	.globl _P17
                                    101 	.globl _P16
                                    102 	.globl _P15
                                    103 	.globl _P14
                                    104 	.globl _P13
                                    105 	.globl _P12
                                    106 	.globl _P11
                                    107 	.globl _P10
                                    108 	.globl _P07
                                    109 	.globl _P06
                                    110 	.globl _P05
                                    111 	.globl _P04
                                    112 	.globl _P03
                                    113 	.globl _P02
                                    114 	.globl _P01
                                    115 	.globl _P00
                                    116 	.globl _P
                                    117 	.globl _F1
                                    118 	.globl _OV
                                    119 	.globl _RS0
                                    120 	.globl _RS1
                                    121 	.globl _F0
                                    122 	.globl _AC
                                    123 	.globl _CY
                                    124 	.globl _PWMFDCR
                                    125 	.globl _PWMIF
                                    126 	.globl _PWMCR
                                    127 	.globl _PWMCFG
                                    128 	.globl _CMPCR2
                                    129 	.globl _CMPCR1
                                    130 	.globl _CCAP2H
                                    131 	.globl _CCAP1H
                                    132 	.globl _CCAP0H
                                    133 	.globl _PCA_PWM2
                                    134 	.globl _PCA_PWM1
                                    135 	.globl _PCA_PWM0
                                    136 	.globl _CCAP2L
                                    137 	.globl _CCAP1L
                                    138 	.globl _CCAP0L
                                    139 	.globl _CCAPM2
                                    140 	.globl _CCAPM1
                                    141 	.globl _CCAPM0
                                    142 	.globl _CH
                                    143 	.globl _CL
                                    144 	.globl _CMOD
                                    145 	.globl _CCON
                                    146 	.globl _IAP_CONTR
                                    147 	.globl _IAP_TRIG
                                    148 	.globl _IAP_CMD
                                    149 	.globl _IAP_ADDRL
                                    150 	.globl _IAP_ADDRH
                                    151 	.globl _IAP_DATA
                                    152 	.globl _SPDAT
                                    153 	.globl _SPCTL
                                    154 	.globl _SPSTAT
                                    155 	.globl _ADC_RESL
                                    156 	.globl _ADC_RES
                                    157 	.globl _ADC_CONTR
                                    158 	.globl _SADEN
                                    159 	.globl _SADDR
                                    160 	.globl _S4BUF
                                    161 	.globl _S4CON
                                    162 	.globl _S3BUF
                                    163 	.globl _S3CON
                                    164 	.globl _S2BUF
                                    165 	.globl _S2CON
                                    166 	.globl _SBUF
                                    167 	.globl _SCON
                                    168 	.globl _WDT_CONTR
                                    169 	.globl _WKTCH
                                    170 	.globl _WKTCL
                                    171 	.globl _T2L
                                    172 	.globl _T2H
                                    173 	.globl _T3L
                                    174 	.globl _T3H
                                    175 	.globl _T4L
                                    176 	.globl _T4H
                                    177 	.globl _T3T4M
                                    178 	.globl _T4T3M
                                    179 	.globl _TH1
                                    180 	.globl _TH0
                                    181 	.globl _TL1
                                    182 	.globl _TL0
                                    183 	.globl _TMOD
                                    184 	.globl _TCON
                                    185 	.globl _INT_CLKO
                                    186 	.globl _IP2
                                    187 	.globl _IE2
                                    188 	.globl _IP
                                    189 	.globl _IE
                                    190 	.globl _P_SW2
                                    191 	.globl _P1ASF
                                    192 	.globl _BUS_SPEED
                                    193 	.globl _CLK_DIV
                                    194 	.globl _P_SW1
                                    195 	.globl _AUXR1
                                    196 	.globl _AUXR
                                    197 	.globl _PCON
                                    198 	.globl _P7M1
                                    199 	.globl _P7M0
                                    200 	.globl _P6M1
                                    201 	.globl _P6M0
                                    202 	.globl _P5M1
                                    203 	.globl _P5M0
                                    204 	.globl _P4M1
                                    205 	.globl _P4M0
                                    206 	.globl _P3M1
                                    207 	.globl _P3M0
                                    208 	.globl _P2M1
                                    209 	.globl _P2M0
                                    210 	.globl _P1M1
                                    211 	.globl _P1M0
                                    212 	.globl _P0M1
                                    213 	.globl _P0M0
                                    214 	.globl _P7
                                    215 	.globl _P6
                                    216 	.globl _P5
                                    217 	.globl _P4
                                    218 	.globl _P3
                                    219 	.globl _P2
                                    220 	.globl _P1
                                    221 	.globl _P0
                                    222 	.globl _DPH
                                    223 	.globl _DPL
                                    224 	.globl _SP
                                    225 	.globl _PSW
                                    226 	.globl _B
                                    227 	.globl _ACC
                                    228 	.globl _I2C_Start
                                    229 	.globl _I2C_End
                                    230 	.globl _IIC_Send_ACK
                                    231 	.globl _IIC_Get_ACK
                                    232 	.globl _I2C_SendByte
                                    233 	.globl _I2C_ReadByte
                                    234 ;--------------------------------------------------------
                                    235 ; special function registers
                                    236 ;--------------------------------------------------------
                                    237 	.area RSEG    (ABS,DATA)
      000000                        238 	.org 0x0000
                           0000E0   239 _ACC	=	0x00e0
                           0000F0   240 _B	=	0x00f0
                           0000D0   241 _PSW	=	0x00d0
                           000081   242 _SP	=	0x0081
                           000082   243 _DPL	=	0x0082
                           000083   244 _DPH	=	0x0083
                           000080   245 _P0	=	0x0080
                           000090   246 _P1	=	0x0090
                           0000A0   247 _P2	=	0x00a0
                           0000B0   248 _P3	=	0x00b0
                           0000C0   249 _P4	=	0x00c0
                           0000C8   250 _P5	=	0x00c8
                           0000E8   251 _P6	=	0x00e8
                           0000F8   252 _P7	=	0x00f8
                           000094   253 _P0M0	=	0x0094
                           000093   254 _P0M1	=	0x0093
                           000092   255 _P1M0	=	0x0092
                           000091   256 _P1M1	=	0x0091
                           000096   257 _P2M0	=	0x0096
                           000095   258 _P2M1	=	0x0095
                           0000B2   259 _P3M0	=	0x00b2
                           0000B1   260 _P3M1	=	0x00b1
                           0000B4   261 _P4M0	=	0x00b4
                           0000B3   262 _P4M1	=	0x00b3
                           0000CA   263 _P5M0	=	0x00ca
                           0000C9   264 _P5M1	=	0x00c9
                           0000CC   265 _P6M0	=	0x00cc
                           0000CB   266 _P6M1	=	0x00cb
                           0000E2   267 _P7M0	=	0x00e2
                           0000E1   268 _P7M1	=	0x00e1
                           000087   269 _PCON	=	0x0087
                           00008E   270 _AUXR	=	0x008e
                           0000A2   271 _AUXR1	=	0x00a2
                           0000A2   272 _P_SW1	=	0x00a2
                           000097   273 _CLK_DIV	=	0x0097
                           0000A1   274 _BUS_SPEED	=	0x00a1
                           00009D   275 _P1ASF	=	0x009d
                           0000BA   276 _P_SW2	=	0x00ba
                           0000A8   277 _IE	=	0x00a8
                           0000B8   278 _IP	=	0x00b8
                           0000AF   279 _IE2	=	0x00af
                           0000B5   280 _IP2	=	0x00b5
                           00008F   281 _INT_CLKO	=	0x008f
                           000088   282 _TCON	=	0x0088
                           000089   283 _TMOD	=	0x0089
                           00008A   284 _TL0	=	0x008a
                           00008B   285 _TL1	=	0x008b
                           00008C   286 _TH0	=	0x008c
                           00008D   287 _TH1	=	0x008d
                           0000D1   288 _T4T3M	=	0x00d1
                           0000D1   289 _T3T4M	=	0x00d1
                           0000D2   290 _T4H	=	0x00d2
                           0000D3   291 _T4L	=	0x00d3
                           0000D4   292 _T3H	=	0x00d4
                           0000D5   293 _T3L	=	0x00d5
                           0000D6   294 _T2H	=	0x00d6
                           0000D7   295 _T2L	=	0x00d7
                           0000AA   296 _WKTCL	=	0x00aa
                           0000AB   297 _WKTCH	=	0x00ab
                           0000C1   298 _WDT_CONTR	=	0x00c1
                           000098   299 _SCON	=	0x0098
                           000099   300 _SBUF	=	0x0099
                           00009A   301 _S2CON	=	0x009a
                           00009B   302 _S2BUF	=	0x009b
                           0000AC   303 _S3CON	=	0x00ac
                           0000AD   304 _S3BUF	=	0x00ad
                           000084   305 _S4CON	=	0x0084
                           000085   306 _S4BUF	=	0x0085
                           0000A9   307 _SADDR	=	0x00a9
                           0000B9   308 _SADEN	=	0x00b9
                           0000BC   309 _ADC_CONTR	=	0x00bc
                           0000BD   310 _ADC_RES	=	0x00bd
                           0000BE   311 _ADC_RESL	=	0x00be
                           0000CD   312 _SPSTAT	=	0x00cd
                           0000CE   313 _SPCTL	=	0x00ce
                           0000CF   314 _SPDAT	=	0x00cf
                           0000C2   315 _IAP_DATA	=	0x00c2
                           0000C3   316 _IAP_ADDRH	=	0x00c3
                           0000C4   317 _IAP_ADDRL	=	0x00c4
                           0000C5   318 _IAP_CMD	=	0x00c5
                           0000C6   319 _IAP_TRIG	=	0x00c6
                           0000C7   320 _IAP_CONTR	=	0x00c7
                           0000D8   321 _CCON	=	0x00d8
                           0000D9   322 _CMOD	=	0x00d9
                           0000E9   323 _CL	=	0x00e9
                           0000F9   324 _CH	=	0x00f9
                           0000DA   325 _CCAPM0	=	0x00da
                           0000DB   326 _CCAPM1	=	0x00db
                           0000DC   327 _CCAPM2	=	0x00dc
                           0000EA   328 _CCAP0L	=	0x00ea
                           0000EB   329 _CCAP1L	=	0x00eb
                           0000EC   330 _CCAP2L	=	0x00ec
                           0000F2   331 _PCA_PWM0	=	0x00f2
                           0000F3   332 _PCA_PWM1	=	0x00f3
                           0000F4   333 _PCA_PWM2	=	0x00f4
                           0000FA   334 _CCAP0H	=	0x00fa
                           0000FB   335 _CCAP1H	=	0x00fb
                           0000FC   336 _CCAP2H	=	0x00fc
                           0000E6   337 _CMPCR1	=	0x00e6
                           0000E7   338 _CMPCR2	=	0x00e7
                           0000F1   339 _PWMCFG	=	0x00f1
                           0000F5   340 _PWMCR	=	0x00f5
                           0000F6   341 _PWMIF	=	0x00f6
                           0000F7   342 _PWMFDCR	=	0x00f7
                                    343 ;--------------------------------------------------------
                                    344 ; special function bits
                                    345 ;--------------------------------------------------------
                                    346 	.area RSEG    (ABS,DATA)
      000000                        347 	.org 0x0000
                           0000D7   348 _CY	=	0x00d7
                           0000D6   349 _AC	=	0x00d6
                           0000D5   350 _F0	=	0x00d5
                           0000D4   351 _RS1	=	0x00d4
                           0000D3   352 _RS0	=	0x00d3
                           0000D2   353 _OV	=	0x00d2
                           0000D1   354 _F1	=	0x00d1
                           0000D0   355 _P	=	0x00d0
                           000080   356 _P00	=	0x0080
                           000081   357 _P01	=	0x0081
                           000082   358 _P02	=	0x0082
                           000083   359 _P03	=	0x0083
                           000084   360 _P04	=	0x0084
                           000085   361 _P05	=	0x0085
                           000086   362 _P06	=	0x0086
                           000087   363 _P07	=	0x0087
                           000090   364 _P10	=	0x0090
                           000091   365 _P11	=	0x0091
                           000092   366 _P12	=	0x0092
                           000093   367 _P13	=	0x0093
                           000094   368 _P14	=	0x0094
                           000095   369 _P15	=	0x0095
                           000096   370 _P16	=	0x0096
                           000097   371 _P17	=	0x0097
                           0000A0   372 _P20	=	0x00a0
                           0000A1   373 _P21	=	0x00a1
                           0000A2   374 _P22	=	0x00a2
                           0000A3   375 _P23	=	0x00a3
                           0000A4   376 _P24	=	0x00a4
                           0000A5   377 _P25	=	0x00a5
                           0000A6   378 _P26	=	0x00a6
                           0000A7   379 _P27	=	0x00a7
                           0000B0   380 _P30	=	0x00b0
                           0000B1   381 _P31	=	0x00b1
                           0000B2   382 _P32	=	0x00b2
                           0000B3   383 _P33	=	0x00b3
                           0000B4   384 _P34	=	0x00b4
                           0000B5   385 _P35	=	0x00b5
                           0000B6   386 _P36	=	0x00b6
                           0000B7   387 _P37	=	0x00b7
                           0000C0   388 _P40	=	0x00c0
                           0000C1   389 _P41	=	0x00c1
                           0000C2   390 _P42	=	0x00c2
                           0000C3   391 _P43	=	0x00c3
                           0000C4   392 _P44	=	0x00c4
                           0000C5   393 _P45	=	0x00c5
                           0000C6   394 _P46	=	0x00c6
                           0000C7   395 _P47	=	0x00c7
                           0000C8   396 _P50	=	0x00c8
                           0000C9   397 _P51	=	0x00c9
                           0000CA   398 _P52	=	0x00ca
                           0000CB   399 _P53	=	0x00cb
                           0000CC   400 _P54	=	0x00cc
                           0000CD   401 _P55	=	0x00cd
                           0000CE   402 _P56	=	0x00ce
                           0000CF   403 _P57	=	0x00cf
                           0000E8   404 _P60	=	0x00e8
                           0000E9   405 _P61	=	0x00e9
                           0000EA   406 _P62	=	0x00ea
                           0000EB   407 _P63	=	0x00eb
                           0000EC   408 _P64	=	0x00ec
                           0000ED   409 _P65	=	0x00ed
                           0000EE   410 _P66	=	0x00ee
                           0000EF   411 _P67	=	0x00ef
                           0000F8   412 _P70	=	0x00f8
                           0000F9   413 _P71	=	0x00f9
                           0000FA   414 _P72	=	0x00fa
                           0000FB   415 _P73	=	0x00fb
                           0000FC   416 _P74	=	0x00fc
                           0000FD   417 _P75	=	0x00fd
                           0000FE   418 _P76	=	0x00fe
                           0000FF   419 _P77	=	0x00ff
                           0000AF   420 _EA	=	0x00af
                           0000AE   421 _ELVD	=	0x00ae
                           0000AD   422 _EADC	=	0x00ad
                           0000AC   423 _ES	=	0x00ac
                           0000AB   424 _ET1	=	0x00ab
                           0000AA   425 _EX1	=	0x00aa
                           0000A9   426 _ET0	=	0x00a9
                           0000A8   427 _EX0	=	0x00a8
                           0000BF   428 _PPCA	=	0x00bf
                           0000BE   429 _PLVD	=	0x00be
                           0000BD   430 _PADC	=	0x00bd
                           0000BC   431 _PS	=	0x00bc
                           0000BB   432 _PT1	=	0x00bb
                           0000BA   433 _PX1	=	0x00ba
                           0000B9   434 _PT0	=	0x00b9
                           0000B8   435 _PX0	=	0x00b8
                           00008F   436 _TF1	=	0x008f
                           00008E   437 _TR1	=	0x008e
                           00008D   438 _TF0	=	0x008d
                           00008C   439 _TR0	=	0x008c
                           00008B   440 _IE1	=	0x008b
                           00008A   441 _IT1	=	0x008a
                           000089   442 _IE0	=	0x0089
                           000088   443 _IT0	=	0x0088
                           00009F   444 _SM0	=	0x009f
                           00009E   445 _SM1	=	0x009e
                           00009D   446 _SM2	=	0x009d
                           00009C   447 _REN	=	0x009c
                           00009B   448 _TB8	=	0x009b
                           00009A   449 _RB8	=	0x009a
                           000099   450 _TI	=	0x0099
                           000098   451 _RI	=	0x0098
                           0000DF   452 _CF	=	0x00df
                           0000DE   453 _CR	=	0x00de
                           0000DA   454 _CCF2	=	0x00da
                           0000D9   455 _CCF1	=	0x00d9
                           0000D8   456 _CCF0	=	0x00d8
                           0000A4   457 _SDA	=	0x00a4
                           0000A5   458 _SCL	=	0x00a5
                                    459 ;--------------------------------------------------------
                                    460 ; overlayable register banks
                                    461 ;--------------------------------------------------------
                                    462 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                        463 	.ds 8
                                    464 ;--------------------------------------------------------
                                    465 ; internal ram data
                                    466 ;--------------------------------------------------------
                                    467 	.area DSEG    (DATA)
                                    468 ;--------------------------------------------------------
                                    469 ; overlayable items in internal ram
                                    470 ;--------------------------------------------------------
                                    471 ;--------------------------------------------------------
                                    472 ; indirectly addressable internal ram data
                                    473 ;--------------------------------------------------------
                                    474 	.area ISEG    (DATA)
                                    475 ;--------------------------------------------------------
                                    476 ; absolute internal ram data
                                    477 ;--------------------------------------------------------
                                    478 	.area IABS    (ABS,DATA)
                                    479 	.area IABS    (ABS,DATA)
                                    480 ;--------------------------------------------------------
                                    481 ; bit data
                                    482 ;--------------------------------------------------------
                                    483 	.area BSEG    (BIT)
      000000                        484 _IIC_Get_ACK_ret_10000_18:
      000000                        485 	.ds 1
                                    486 ;--------------------------------------------------------
                                    487 ; paged external ram data
                                    488 ;--------------------------------------------------------
                                    489 	.area PSEG    (PAG,XDATA)
                                    490 ;--------------------------------------------------------
                                    491 ; uninitialized external ram data
                                    492 ;--------------------------------------------------------
                                    493 	.area XSEG    (XDATA)
                                    494 ;--------------------------------------------------------
                                    495 ; absolute external ram data
                                    496 ;--------------------------------------------------------
                                    497 	.area XABS    (ABS,XDATA)
                                    498 ;--------------------------------------------------------
                                    499 ; initialized external ram data
                                    500 ;--------------------------------------------------------
                                    501 	.area XISEG   (XDATA)
                                    502 	.area HOME    (CODE)
                                    503 	.area GSINIT0 (CODE)
                                    504 	.area GSINIT1 (CODE)
                                    505 	.area GSINIT2 (CODE)
                                    506 	.area GSINIT3 (CODE)
                                    507 	.area GSINIT4 (CODE)
                                    508 	.area GSINIT5 (CODE)
                                    509 	.area GSINIT  (CODE)
                                    510 	.area GSFINAL (CODE)
                                    511 	.area CSEG    (CODE)
                                    512 ;--------------------------------------------------------
                                    513 ; global & static initialisations
                                    514 ;--------------------------------------------------------
                                    515 	.area HOME    (CODE)
                                    516 	.area GSINIT  (CODE)
                                    517 	.area GSFINAL (CODE)
                                    518 	.area GSINIT  (CODE)
                                    519 ;--------------------------------------------------------
                                    520 ; Home
                                    521 ;--------------------------------------------------------
                                    522 	.area HOME    (CODE)
                                    523 	.area HOME    (CODE)
                                    524 ;--------------------------------------------------------
                                    525 ; code
                                    526 ;--------------------------------------------------------
                                    527 	.area CSEG    (CODE)
                                    528 ;------------------------------------------------------------
                                    529 ;Allocation info for local variables in function 'I2C_Delay'
                                    530 ;------------------------------------------------------------
                                    531 ;	code/rda5807/I2C.c:11: void I2C_Delay()
                                    532 ;	-----------------------------------------
                                    533 ;	 function I2C_Delay
                                    534 ;	-----------------------------------------
      000000                        535 _I2C_Delay:
                           000007   536 	ar7 = 0x07
                           000006   537 	ar6 = 0x06
                           000005   538 	ar5 = 0x05
                           000004   539 	ar4 = 0x04
                           000003   540 	ar3 = 0x03
                           000002   541 	ar2 = 0x02
                           000001   542 	ar1 = 0x01
                           000000   543 	ar0 = 0x00
                                    544 ;	code/rda5807/I2C.c:15: Delay_us_(10);
      000000 90 00 0A         [24]  545 	mov	dptr,#0x000a
                                    546 ;	code/rda5807/I2C.c:16: }
      000003 02r00r00         [24]  547 	ljmp	_Delay_us_
                                    548 ;------------------------------------------------------------
                                    549 ;Allocation info for local variables in function 'I2C_Start'
                                    550 ;------------------------------------------------------------
                                    551 ;	code/rda5807/I2C.c:25: void I2C_Start(void)
                                    552 ;	-----------------------------------------
                                    553 ;	 function I2C_Start
                                    554 ;	-----------------------------------------
      000006                        555 _I2C_Start:
                                    556 ;	code/rda5807/I2C.c:27: SDA = 1;     // 需在SCL之前设定
                                    557 ;	assignBit
      000006 D2 A4            [12]  558 	setb	_SDA
                                    559 ;	code/rda5807/I2C.c:28: SCL = 1;     // 硬件进入SDA检测状态
                                    560 ;	assignBit
      000008 D2 A5            [12]  561 	setb	_SCL
                                    562 ;	code/rda5807/I2C.c:29: I2C_Delay(); // 延时至少4.7us
      00000A 12r00r00         [24]  563 	lcall	_I2C_Delay
                                    564 ;	code/rda5807/I2C.c:30: SDA = 0;     // SDA由1->0,产生开始信号
                                    565 ;	assignBit
      00000D C2 A4            [12]  566 	clr	_SDA
                                    567 ;	code/rda5807/I2C.c:31: I2C_Delay(); // 延时至少4us
      00000F 12r00r00         [24]  568 	lcall	_I2C_Delay
                                    569 ;	code/rda5807/I2C.c:32: SCL = 0;     // SCL变为无效
                                    570 ;	assignBit
      000012 C2 A5            [12]  571 	clr	_SCL
                                    572 ;	code/rda5807/I2C.c:33: }
      000014 22               [24]  573 	ret
                                    574 ;------------------------------------------------------------
                                    575 ;Allocation info for local variables in function 'I2C_End'
                                    576 ;------------------------------------------------------------
                                    577 ;	code/rda5807/I2C.c:41: void I2C_End(void)
                                    578 ;	-----------------------------------------
                                    579 ;	 function I2C_End
                                    580 ;	-----------------------------------------
      000015                        581 _I2C_End:
                                    582 ;	code/rda5807/I2C.c:43: SDA = 0;     // 在SCL之前拉低
                                    583 ;	assignBit
      000015 C2 A4            [12]  584 	clr	_SDA
                                    585 ;	code/rda5807/I2C.c:44: SCL = 1;     // 硬件进入SDA检测状态
                                    586 ;	assignBit
      000017 D2 A5            [12]  587 	setb	_SCL
                                    588 ;	code/rda5807/I2C.c:45: I2C_Delay(); // 至少延时4us
      000019 12r00r00         [24]  589 	lcall	_I2C_Delay
                                    590 ;	code/rda5807/I2C.c:46: SDA = 1;     // SDA由0->1,产生结束信号
                                    591 ;	assignBit
      00001C D2 A4            [12]  592 	setb	_SDA
                                    593 ;	code/rda5807/I2C.c:47: I2C_Delay(); // 延时至少4.7us
                                    594 ;	code/rda5807/I2C.c:48: }
      00001E 02r00r00         [24]  595 	ljmp	_I2C_Delay
                                    596 ;------------------------------------------------------------
                                    597 ;Allocation info for local variables in function 'IIC_Send_ACK'
                                    598 ;------------------------------------------------------------
                                    599 ;ack           Allocated to registers r7 
                                    600 ;------------------------------------------------------------
                                    601 ;	code/rda5807/I2C.c:57: void IIC_Send_ACK(uint8_t ack)
                                    602 ;	-----------------------------------------
                                    603 ;	 function IIC_Send_ACK
                                    604 ;	-----------------------------------------
      000021                        605 _IIC_Send_ACK:
                                    606 ;	code/rda5807/I2C.c:59: SDA = ack; // 产生应答电平
                                    607 ;	assignBit
      000021 E5 82            [12]  608 	mov	a,dpl
      000023 24 FF            [12]  609 	add	a,#0xff
      000025 92 A4            [24]  610 	mov	_SDA,c
                                    611 ;	code/rda5807/I2C.c:60: I2C_Delay();
      000027 12r00r00         [24]  612 	lcall	_I2C_Delay
                                    613 ;	code/rda5807/I2C.c:61: SCL = 1;     // 发送应答信号
                                    614 ;	assignBit
      00002A D2 A5            [12]  615 	setb	_SCL
                                    616 ;	code/rda5807/I2C.c:62: I2C_Delay(); // 延时至少4us
      00002C 12r00r00         [24]  617 	lcall	_I2C_Delay
                                    618 ;	code/rda5807/I2C.c:63: SCL = 0;     // 整个期间保持应答信号
                                    619 ;	assignBit
      00002F C2 A5            [12]  620 	clr	_SCL
                                    621 ;	code/rda5807/I2C.c:64: }
      000031 22               [24]  622 	ret
                                    623 ;------------------------------------------------------------
                                    624 ;Allocation info for local variables in function 'IIC_Get_ACK'
                                    625 ;------------------------------------------------------------
                                    626 ;	code/rda5807/I2C.c:72: uint8_t IIC_Get_ACK(void)
                                    627 ;	-----------------------------------------
                                    628 ;	 function IIC_Get_ACK
                                    629 ;	-----------------------------------------
      000032                        630 _IIC_Get_ACK:
                                    631 ;	code/rda5807/I2C.c:75: SDA = 1;   // 电阻上拉,进入读
                                    632 ;	assignBit
      000032 D2 A4            [12]  633 	setb	_SDA
                                    634 ;	code/rda5807/I2C.c:76: I2C_Delay();
      000034 12r00r00         [24]  635 	lcall	_I2C_Delay
                                    636 ;	code/rda5807/I2C.c:77: SCL = 1;     // 进入应答检测
                                    637 ;	assignBit
      000037 D2 A5            [12]  638 	setb	_SCL
                                    639 ;	code/rda5807/I2C.c:78: I2C_Delay(); // 至少延时4us
      000039 12r00r00         [24]  640 	lcall	_I2C_Delay
                                    641 ;	code/rda5807/I2C.c:79: ret = SDA;   // 保存应答信号
                                    642 ;	assignBit
      00003C A2 A4            [12]  643 	mov	c,_SDA
      00003E 92*00            [24]  644 	mov	_IIC_Get_ACK_ret_10000_18,c
                                    645 ;	code/rda5807/I2C.c:80: SCL = 0;
                                    646 ;	assignBit
      000040 C2 A5            [12]  647 	clr	_SCL
                                    648 ;	code/rda5807/I2C.c:81: return (ret);
      000042 A2*00            [12]  649 	mov	c,_IIC_Get_ACK_ret_10000_18
      000044 E4               [12]  650 	clr	a
      000045 33               [12]  651 	rlc	a
      000046 F5 82            [12]  652 	mov	dpl,a
                                    653 ;	code/rda5807/I2C.c:82: }
      000048 22               [24]  654 	ret
                                    655 ;------------------------------------------------------------
                                    656 ;Allocation info for local variables in function 'I2C_SendByte'
                                    657 ;------------------------------------------------------------
                                    658 ;dat           Allocated to registers r7 
                                    659 ;loop          Allocated to registers r6 
                                    660 ;------------------------------------------------------------
                                    661 ;	code/rda5807/I2C.c:91: uint8_t I2C_SendByte(uint8_t dat)
                                    662 ;	-----------------------------------------
                                    663 ;	 function I2C_SendByte
                                    664 ;	-----------------------------------------
      000049                        665 _I2C_SendByte:
      000049 AF 82            [24]  666 	mov	r7, dpl
                                    667 ;	code/rda5807/I2C.c:95: while (loop--)
      00004B 7E 08            [12]  668 	mov	r6,#0x08
      00004D                        669 00104$:
      00004D 8E 05            [24]  670 	mov	ar5,r6
      00004F 1E               [12]  671 	dec	r6
      000050 ED               [12]  672 	mov	a,r5
      000051 60 21            [24]  673 	jz	00106$
                                    674 ;	code/rda5807/I2C.c:98: if (dat & 0x80)
      000053 EF               [12]  675 	mov	a,r7
      000054 30 E7 04         [24]  676 	jnb	acc.7,00102$
                                    677 ;	code/rda5807/I2C.c:99: SDA = 1;
                                    678 ;	assignBit
      000057 D2 A4            [12]  679 	setb	_SDA
      000059 80 02            [24]  680 	sjmp	00103$
      00005B                        681 00102$:
                                    682 ;	code/rda5807/I2C.c:101: SDA = 0;
                                    683 ;	assignBit
      00005B C2 A4            [12]  684 	clr	_SDA
      00005D                        685 00103$:
                                    686 ;	code/rda5807/I2C.c:102: I2C_Delay();
      00005D C0 07            [24]  687 	push	ar7
      00005F C0 06            [24]  688 	push	ar6
      000061 12r00r00         [24]  689 	lcall	_I2C_Delay
                                    690 ;	code/rda5807/I2C.c:103: SCL = 1;
                                    691 ;	assignBit
      000064 D2 A5            [12]  692 	setb	_SCL
                                    693 ;	code/rda5807/I2C.c:104: I2C_Delay(); // 延时至少4us
      000066 12r00r00         [24]  694 	lcall	_I2C_Delay
      000069 D0 06            [24]  695 	pop	ar6
      00006B D0 07            [24]  696 	pop	ar7
                                    697 ;	code/rda5807/I2C.c:105: SCL = 0;
                                    698 ;	assignBit
      00006D C2 A5            [12]  699 	clr	_SCL
                                    700 ;	code/rda5807/I2C.c:106: dat <<= 1; // 低位向高位移动
      00006F EF               [12]  701 	mov	a,r7
      000070 2F               [12]  702 	add	a,r7
      000071 FF               [12]  703 	mov	r7,a
      000072 80 D9            [24]  704 	sjmp	00104$
      000074                        705 00106$:
                                    706 ;	code/rda5807/I2C.c:109: ack = IIC_Get_ACK();
      000074 12r00r32         [24]  707 	lcall	_IIC_Get_ACK
                                    708 ;	assignBit
      000077 E5 82            [12]  709 	mov	a,dpl
      000079 24 FF            [12]  710 	add	a,#0xff
      00007B E4               [12]  711 	clr	a
      00007C 33               [12]  712 	rlc	a
                                    713 ;	code/rda5807/I2C.c:111: return (ack);
                                    714 ;	code/rda5807/I2C.c:112: }
      00007D F5 82            [12]  715 	mov	dpl,a
      00007F 22               [24]  716 	ret
                                    717 ;------------------------------------------------------------
                                    718 ;Allocation info for local variables in function 'I2C_ReadByte'
                                    719 ;------------------------------------------------------------
                                    720 ;ack           Allocated to registers r7 
                                    721 ;loop          Allocated to registers r5 
                                    722 ;ret           Allocated to registers r6 
                                    723 ;------------------------------------------------------------
                                    724 ;	code/rda5807/I2C.c:120: uint8_t I2C_ReadByte(uint8_t ack)
                                    725 ;	-----------------------------------------
                                    726 ;	 function I2C_ReadByte
                                    727 ;	-----------------------------------------
      000080                        728 _I2C_ReadByte:
      000080 AF 82            [24]  729 	mov	r7, dpl
                                    730 ;	code/rda5807/I2C.c:123: uint8_t ret = 0;
      000082 7E 00            [12]  731 	mov	r6,#0x00
                                    732 ;	code/rda5807/I2C.c:125: SDA = 1;
                                    733 ;	assignBit
      000084 D2 A4            [12]  734 	setb	_SDA
                                    735 ;	code/rda5807/I2C.c:126: while (loop--)
      000086 7D 08            [12]  736 	mov	r5,#0x08
      000088                        737 00103$:
      000088 8D 04            [24]  738 	mov	ar4,r5
      00008A 1D               [12]  739 	dec	r5
      00008B EC               [12]  740 	mov	a,r4
      00008C 60 2B            [24]  741 	jz	00105$
                                    742 ;	code/rda5807/I2C.c:128: ret <<= 1;
      00008E EE               [12]  743 	mov	a,r6
      00008F 2E               [12]  744 	add	a,r6
      000090 FE               [12]  745 	mov	r6,a
                                    746 ;	code/rda5807/I2C.c:129: SCL = 1;
                                    747 ;	assignBit
      000091 D2 A5            [12]  748 	setb	_SCL
                                    749 ;	code/rda5807/I2C.c:130: I2C_Delay();
      000093 C0 07            [24]  750 	push	ar7
      000095 C0 06            [24]  751 	push	ar6
      000097 C0 05            [24]  752 	push	ar5
      000099 12r00r00         [24]  753 	lcall	_I2C_Delay
      00009C D0 05            [24]  754 	pop	ar5
      00009E D0 06            [24]  755 	pop	ar6
      0000A0 D0 07            [24]  756 	pop	ar7
                                    757 ;	code/rda5807/I2C.c:132: if (SDA)
      0000A2 30 A4 01         [24]  758 	jnb	_SDA,00102$
                                    759 ;	code/rda5807/I2C.c:134: ret++;
      0000A5 0E               [12]  760 	inc	r6
      0000A6                        761 00102$:
                                    762 ;	code/rda5807/I2C.c:136: SCL = 0;
                                    763 ;	assignBit
      0000A6 C2 A5            [12]  764 	clr	_SCL
                                    765 ;	code/rda5807/I2C.c:137: I2C_Delay();
      0000A8 C0 07            [24]  766 	push	ar7
      0000AA C0 06            [24]  767 	push	ar6
      0000AC C0 05            [24]  768 	push	ar5
      0000AE 12r00r00         [24]  769 	lcall	_I2C_Delay
      0000B1 D0 05            [24]  770 	pop	ar5
      0000B3 D0 06            [24]  771 	pop	ar6
      0000B5 D0 07            [24]  772 	pop	ar7
      0000B7 80 CF            [24]  773 	sjmp	00103$
      0000B9                        774 00105$:
                                    775 ;	code/rda5807/I2C.c:140: IIC_Send_ACK(ack);
      0000B9 8F 82            [24]  776 	mov	dpl, r7
      0000BB C0 06            [24]  777 	push	ar6
      0000BD 12r00r21         [24]  778 	lcall	_IIC_Send_ACK
      0000C0 D0 06            [24]  779 	pop	ar6
                                    780 ;	code/rda5807/I2C.c:142: return ret;
      0000C2 8E 82            [24]  781 	mov	dpl, r6
                                    782 ;	code/rda5807/I2C.c:143: }
      0000C4 22               [24]  783 	ret
                                    784 	.area CSEG    (CODE)
                                    785 	.area CONST   (CODE)
                                    786 	.area XINIT   (CODE)
                                    787 	.area CABS    (ABS,CODE)
